webpackJsonp([1],{"+Sft":function(t,e){},"5FFu":function(t,e){},FnP4:function(t,e){},JYzR:function(t,e){},LicG:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};a.d(n,"login",function(){return N}),a.d(n,"index",function(){return W}),a.d(n,"allCorp",function(){return q}),a.d(n,"searchCorp",function(){return H}),a.d(n,"tryouts",function(){return I}),a.d(n,"expiringcompanys",function(){return O}),a.d(n,"expiredcompanys",function(){return A}),a.d(n,"newcompanys",function(){return J}),a.d(n,"users",function(){return Y}),a.d(n,"newusers",function(){return B}),a.d(n,"searchUser",function(){return G}),a.d(n,"tourist",function(){return X}),a.d(n,"configs",function(){return Q}),a.d(n,"editConfigs",function(){return K}),a.d(n,"companymembers",function(){return Z}),a.d(n,"companyhosts",function(){return tt}),a.d(n,"companyexpire",function(){return et}),a.d(n,"companymanager",function(){return at}),a.d(n,"deleteCorp",function(){return nt}),a.d(n,"disableUser",function(){return st}),a.d(n,"deleteUser",function(){return it}),a.d(n,"admin",function(){return ot});var s=a("7+uW"),i={name:"App",created:function(){!localStorage.getItem("botToken")&&this.$router.replace("/login")}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")(i,o,!1,function(t){a("JYzR")},null,null).exports,c=a("/ocq"),l={name:"login",data:function(){return{username:"",password:"",failmsg:"",loading:null}},methods:{check:function(t){var e=this;t.srcElement.blur(),t.target.blur(),this.loading=this.$loading(),this.$axios.login({username:this.username,password:this.password}).then(function(t){if(e.loading.close(),0!=t.status)throw t.msg;localStorage.setItem("botToken",t.token),e.$router.replace("/home")}).catch(function(t){e.loading.close(),e.$message.error(t)})}},created:function(){localStorage.removeItem("botToken")}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login"}},[a("el-main",[a("div",{staticClass:"main"},[a("div",{staticClass:"login"},[a("div",{staticClass:"username input"},[a("span",[t._v("用户名")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.check(e):null}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),t._v(" "),a("div",{staticClass:"password input"},[a("span",[t._v("密码")]),t._v(" "),a("el-input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.check(e):null}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.check}},[t._v("登录")])],1)])])])],1)},staticRenderFns:[]};var p=a("VU/8")(l,u,!1,function(t){a("TTFl")},"data-v-79c82549",null).exports,m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"reset"}},[a("el-main",[a("div",{staticClass:"main"},[a("div",{staticClass:"login"},[a("div",{staticClass:"username input"},[a("span",[t._v("输入旧密码")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入旧密码"},model:{value:t.oldpassword,callback:function(e){t.oldpassword=e},expression:"oldpassword"}})],1),t._v(" "),a("div",{staticClass:"password input"},[a("span",[t._v("输入新密码")]),t._v(" "),a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:t.newpassword,callback:function(e){t.newpassword=e},expression:"newpassword"}})],1),t._v(" "),a("div",{staticClass:"password input"},[a("span",[t._v("再次输入新密码")]),t._v(" "),a("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:t.checkpassword,callback:function(e){t.checkpassword=e},expression:"checkpassword"}})],1),t._v(" "),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.change}},[t._v("修改")])],1)])])])],1)},staticRenderFns:[]};var d=a("VU/8")({name:"reset",data:function(){return{oldpassword:"",newpassword:"",checkpassword:""}},methods:{change:function(){var t=this;if(this.newpassword===this.checkpassword){var e={oldpassword:this.oldpassword,newpassword:this.newpassword};this.loading=this.$loading(),this.$axios.admin(e).then(function(e){t.$router.back(),t.$message({message:"修改成功！",type:"success"})}).catch(this.$message.error).finally(function(){t.loading.close()})}else this.$message.error("两次密码输入不一致！")}},created:function(){}},m,!1,function(t){a("qW6r")},"data-v-f8c282a4",null).exports,h={name:"home",data:function(){return{isCollapse:!1}},computed:{path:function(){return this.$route.params.type?this.$route.path.slice(0,-1)+"1":this.$route.path}},methods:{handle:function(t){this[t]()},signout:function(){localStorage.removeItem("botToken"),this.$router.replace("/login")},password:function(){this.$router.push("/reset")},selectPath:function(){}},created:function(){}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("el-header",[a("div",{staticClass:"header"},[a("img",{attrs:{src:"/static/images/u2.png",alt:""},on:{click:function(e){t.isCollapse=!t.isCollapse}}}),t._v(" "),a("div",{staticClass:"user"},[a("el-dropdown",{on:{command:t.handle}},[a("span",{staticClass:"el-dropdown-link"},[t._v("\n            超级管理员"),a("i",{staticClass:"el-icon-caret-bottom",staticStyle:{color:"#32c5d2"}})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"signout"}},[t._v("退出登录")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"password",divided:""}},[t._v("修改密码")])],1)],1)],1)])]),t._v(" "),a("el-container",[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.path,router:"",collapse:t.isCollapse},on:{select:t.selectPath}},[a("el-menu-item",{attrs:{index:"/home"}},[a("div",{staticClass:"el-icon-home"},[a("img",{attrs:{src:"/static/images/home.png",alt:""}})]),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("后台首页")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/home/company/1"}},[a("div",{staticClass:"el-icon-home"},[a("img",{attrs:{src:"/static/images/corp.png",alt:""}})]),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("公司管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/home/user/1"}},[a("div",{staticClass:"el-icon-home"},[a("img",{attrs:{src:"/static/images/user.png",alt:""}})]),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("用户管理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"/home/setting"}},[a("div",{staticClass:"el-icon-home"},[a("img",{attrs:{src:"/static/images/set.png",alt:""}})]),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("参数设置")])])],1),t._v(" "),a("el-main",[a("router-view")],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(h,g,!1,function(t){a("jeXW")},"data-v-1c488d56",null).exports,v={name:"backend",data:function(){return{info:{}}},methods:{},created:function(){var t=this;this.$axios.index().then(function(e){"Object"===Object.prototype.toString.call(e).slice(8,-1)&&(t.info=e)}).catch(this.$message.error)}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"backend"}},[a("div",{staticClass:"container"},[a("router-link",{staticClass:"item",attrs:{tag:"div",to:"/home/company/5"}},[a("div",{staticClass:"count"},[t._v(t._s(t.info.new_companys))]),t._v(" "),a("div",{staticClass:"title"},[t._v("今日新增公司")])]),t._v(" "),a("router-link",{staticClass:"item",attrs:{tag:"div",to:"/home/company/3"}},[a("div",{staticClass:"count"},[t._v(t._s(t.info.expiring_companys))]),t._v(" "),a("div",{staticClass:"title"},[t._v("即将到期公司")])]),t._v(" "),a("router-link",{staticClass:"item",attrs:{tag:"div",to:"/home/company/2"}},[a("div",{staticClass:"count"},[t._v(t._s(t.info.try_companys))]),t._v(" "),a("div",{staticClass:"title"},[t._v("试用期中的公司")])]),t._v(" "),a("router-link",{staticClass:"item",attrs:{tag:"div",to:"/home/company/1"}},[a("div",{staticClass:"count"},[t._v(t._s(t.info.total_companys))]),t._v(" "),a("div",{staticClass:"title"},[t._v("公司总数量")])]),t._v(" "),a("router-link",{staticClass:"item",attrs:{tag:"div",to:"/home/user/5"}},[a("div",{staticClass:"count"},[t._v(t._s(t.info.new_users))]),t._v(" "),a("div",{staticClass:"title"},[t._v("今日新增用户")])]),t._v(" "),a("router-link",{staticClass:"item",attrs:{tag:"div",to:"/home/user/1"}},[a("div",{staticClass:"count"},[t._v(t._s(t.info.total_users))]),t._v(" "),a("div",{staticClass:"title"},[t._v("用户总数量")])])],1)])},staticRenderFns:[]};var _=a("VU/8")(v,b,!1,function(t){a("FnP4")},"data-v-74ef66fa",null).exports,y=a("Dd8w"),k=a.n(y),w=a("aozt"),x=a.n(w),$={name:"company",data:function(){return{loading:null,search:"",type:"1",dialogFormVisible:!1,formLabelWidth:"120px",cur:NaN,page:1,pagetotal:1,list:[],dialog:{isShow:!1,show:2,page:1,dialogList:[],companyname:"",inamount:"",totalamount:"",pagetotal:1},temp:{},lastTime:null,cancel:null}},computed:{nav:function(){switch(this.$route.params.type){case"1":return"所有公司";case"2":return"试用期中的公司";case"3":return"即将到期公司";case"4":return"已过期公司";case"5":return"今日新增公司";case"6":return"查询结果"}}},methods:{goSearch:function(){this.search&&(this.$router.push("/home/company/6"),this.searchData())},searchData:function(){var t=this;this.list=[];var e={page:this.page};this.cancelToken(),this.$axios.searchCorp(k()({},e,{name:this.search}),{cancelToken:this.cancel.token}).then(function(e){t.list=e.companyinfo}).catch(this.reject)},deleteRow:function(t,e){var a=this,n={companyname:e[t].companyname};this.loading=this.$loading(),this.$axios.deleteCorp(n).then(function(n){a.$message({message:"删除成功！",type:"success"}),e.splice(t,1)}).catch(this.reject).finally(function(){a.loading.close()})},edit:function(t){this.cur=t,this.temp=k()({},this.list[this.cur]),this.temp.oldcompanyname=this.temp.companyname,this.temp.disable||this.$set(this.temp,"disable",""),this.dialogFormVisible=!0},submit:function(){var t=this,e={oldcompanyname:this.temp.oldcompanyname,newcompanyname:this.temp.companyname,companyemail:this.temp.adminemail,mark:this.temp.companymark,disable:this.temp.disable};this.loading=this.$loading(),this.$axios.companymanager(e).then(function(e){t.$set(t.list,t.cur,k()({},t.temp)),t.dialogFormVisible=!1,t.$message({message:"提交成功！",type:"success"})}).catch(this.$message.error).finally(function(){t.loading.close()})},change:function(){this.init()},dialogChange:function(t,e){var a=this;this.dialog.companyname=t,this.dialog.dialogList=[],e&&(this.dialog.show=e);var n=1===this.dialog.show?this.$axios.companymembers:this.$axios.companyhosts,s={companyname:t,page:this.dialog.page};this.dialog.isShow=!0,n(s).then(function(t){a.dialog.dialogList=1===a.dialog.show?t.userinfo:t.totalhosts,a.dialog.inamount=t.inamount,a.dialog.totalamount=t.totalamount,a.dialog.pagetotal=t.pagetotal}).catch(this.$message.error)},closeDialog:function(t){this.dialog.isShow=!1,this.dialog.companyname="",this.dialog.page=1,t()},pickTime:function(t){var e=this;t.companyexpire+=86399e3;var a={companyname:t.companyname,expiredate:t.companyexpire};this.loading=this.$loading(),this.$axios.companyexpire(a).then(function(t){e.$message({message:"修改成功！",type:"success"})}).catch(function(a){t.companyexpire=e.lastTime,e.$message.error(a)}).finally(function(){e.loading.close()})},reject:function(t){"string"==typeof t&&this.$message.error(t),console.log(t)},cancelToken:function(){this.cancel&&this.cancel.cancel("在调用接口之前先取消之前调用响应还没回来的接口"),this.cancel=x.a.CancelToken.source()},init:function(){var t=this;this.list=[];var e={page:this.page},a=function(e){t.list=e.companyinfo,t.pagetotal=e.pagetotal};switch(this.cancelToken(),this.type){case"1":this.$axios.allCorp(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"2":this.$axios.tryouts(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"3":this.$axios.expiringcompanys(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"4":this.$axios.expiredcompanys(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"5":this.$axios.newcompanys(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject)}},format:function(t,e){return this.$formatTime(t.companyexpire,"-").split(" ")[0]},oprole:function(t,e){switch(t.userallinfo.oprole){case"3":return"运维人员";case"4":return"管理员与审核员";case"6":return"审核员"}},userstatus:function(t){switch(t){case"register":return"已关联";case"manual":return"未关联"}}},created:function(){this.type=this.$route.params.type,this.page=1,this.init()},beforeRouteUpdate:function(t,e,a){this.type=t.params.type,this.page=1,"6"!=this.type&&this.init(),a()}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"company"}},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"first",attrs:{to:{path:"/home/company/1"}}},[t._v("公司管理")]),t._v(" "),"1"!=t.$route.params.type?a("el-breadcrumb-item",[t._v(t._s(t.nav))]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"handle"},[1==t.$route.params.type||6==t.$route.params.type?a("div",{staticClass:"search"},[a("span",[t._v("公司名称")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入查询内容"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.goSearch}},[t._v("查询")])],1):t._e(),t._v(" "),1==t.$route.params.type?a("div",{staticClass:"select"},[a("el-radio-group",{on:{change:function(e){t.$router.push("/home/company/"+t.type)}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("所有公司")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("试用")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("即将到期")]),t._v(" "),a("el-radio-button",{attrs:{label:"4"}},[t._v("已过期")])],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{prop:"companyname",label:"公司名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adminusername",label:"管理员姓名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adminmobile",label:"手机号码",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"adminemail",label:"邮箱",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"companyexpire",label:"到期时间",formatter:t.format,align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"members",label:"人员",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"handle",on:{click:function(a){t.dialogChange(e.row.companyname,1)}}},[t._v(t._s(e.row.members))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"totalhost",label:"服务器数量",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"handle",on:{click:function(a){t.dialogChange(e.row.companyname,2)}}},[t._v(t._s(e.row.totalhost))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"members",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd ","value-format":"timestamp",editable:!1},on:{change:function(a){t.pickTime(e.row)}},nativeOn:{click:function(a){t.lastTime=e.row.companyexpire}},model:{value:e.row.companyexpire,callback:function(a){t.$set(e.row,"companyexpire",a)},expression:"scope.row.companyexpire"}}),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.edit(e.$index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteRow(e.$index,t.list)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","page-count":t.pagetotal,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"current-change":t.change}}),t._v(" "),a("el-dialog",{attrs:{title:"编辑公司",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("div",{staticClass:"content"},[a("div",{staticClass:"company-name item"},[a("span",[t._v("公司名称：")]),t._v(" "),a("el-input",{staticClass:"name",attrs:{placeholder:"请输入内容"},model:{value:t.temp.companyname,callback:function(e){t.$set(t.temp,"companyname",e)},expression:"temp.companyname"}})],1),t._v(" "),a("div",{staticClass:"company-emai item"},[a("span",[t._v("公司邮箱：")]),t._v(" "),a("el-input",{staticClass:"name",attrs:{placeholder:"请输入内容"},model:{value:t.temp.adminemail,callback:function(e){t.$set(t.temp,"adminemail",e)},expression:"temp.adminemail"}})],1),t._v(" "),a("div",{staticClass:"company-emai item"},[a("span",[t._v("备注：")]),t._v(" "),a("el-input",{staticClass:"name",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:t.temp.companymark,callback:function(e){t.$set(t.temp,"companymark",e)},expression:"temp.companymark"}})],1),t._v(" "),a("div",{staticClass:"company-emai item"},[a("span",[t._v("公司状态：")]),t._v(" "),a("div",{staticClass:"name"},[a("el-radio",{attrs:{label:"false"},model:{value:t.temp.disable,callback:function(e){t.$set(t.temp,"disable",e)},expression:"temp.disable"}},[t._v("停用")]),t._v(" "),a("el-radio",{attrs:{label:"true"},model:{value:t.temp.disable,callback:function(e){t.$set(t.temp,"disable",e)},expression:"temp.disable"}},[t._v("启用")])],1)])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提 交")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"公司运维人员","before-close":t.closeDialog,visible:t.dialog.isShow},on:{"update:visible":function(e){t.$set(t.dialog,"isShow",e)}}},[a("div",{staticClass:"content"},[1===t.dialog.show?[a("el-table",{key:"1",staticStyle:{width:"100%"},attrs:{data:t.dialog.dialogList,border:"",height:"350px"}},[a("el-table-column",{attrs:{prop:"userallinfo.username",label:"姓名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.mobile",label:"手机号码",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.oprole",label:"权限",align:"center",formatter:t.oprole}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.userstatus",label:"是否和账号关联",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"userstatus",style:{color:"register"===e.row.userallinfo.userstatus?"green":"#606266"}},[t._v(t._s(t.userstatus(e.row.userallinfo.userstatus)))])]}}])})],1)]:t._e(),t._v(" "),2===t.dialog.show?[a("el-table",{key:"2",staticStyle:{width:"100%"},attrs:{data:t.dialog.dialogList,border:"",height:"350px"}},[a("el-table-column",{attrs:{prop:"name",label:"服务器名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"host",label:"服务器IP地址",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"Hoststatus",label:"监控服务器",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"userstatus",style:{color:"in"===e.row.Hoststatus?"green":"#606266"}},[t._v(t._s("in"===e.row.Hoststatus?"是":"否"))])]}}])})],1)]:t._e()],2),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页","page-count":t.dialog.pagetotal,"current-page":t.dialog.page},on:{"update:currentPage":function(e){t.$set(t.dialog,"page",e)},"current-change":function(e){t.dialogChange(t.dialog.companyname)}}})],1)])],1)},staticRenderFns:[]};var T=a("VU/8")($,C,!1,function(t){a("thme")},"data-v-56ffbf39",null).exports,S={name:"user",data:function(){return{search:{companyname:"",mobile:""},type:"1",dialogFormVisible:!1,formLabelWidth:"120px",cur:NaN,page:1,pagetotal:1,list:[],temp:{},cancel:null}},computed:{nav:function(){switch(this.$route.params.type){case"1":return"所有用户";case"2":return"未关联公司";case"3":return"停用";case"5":return"今日新增用户";case"6":return"查询结果"}}},methods:{goSearch:function(){this.$router.push("/home/user/6"),this.searchData()},searchData:function(){var t=this;this.list=[];var e={page:this.page};this.cancelToken(),this.$axios.searchUser(k()({},e,this.search),{cancelToken:this.cancel.token}).then(function(e){t.list=e.userinfo,t.list.forEach(function(e){e.userallinfo.logintime=t.$formatTime(e.userallinfo.logintime).replace(/\//g,"-")})}).catch(this.reject)},deleteRow:function(t,e){var a=this,n={userid:e[t].userallinfo.userid};this.loading=this.$loading(),this.$axios.deleteUser(n).then(function(n){a.$message({message:"删除成功！",type:"success"}),e.splice(t,1)}).catch(this.reject).finally(function(){a.loading.close()})},disableUser:function(t){var e=this,a=t.row.userallinfo,n="true"===a.userdisable?"false":"true",s={userdisable:n,userid:a.userid};this.loading=this.$loading(),this.$axios.disableUser(s).then(function(s){e.$message({message:"true"===n?"禁用成功":"启用成功",type:"success"}),a.userdisable=n,e.$set(e.list,t.$index,e.list[t.$index])}).catch(this.$message.error).finally(function(){e.loading.close()})},change:function(){this.init()},reject:function(t){"string"==typeof t&&this.$message.error(t),console.log(t)},cancelToken:function(){this.cancel&&this.cancel.cancel("在调用接口之前先取消之前调用响应还没回来的接口"),this.cancel=x.a.CancelToken.source()},init:function(){var t=this;this.list=[];var e={page:this.page},a=function(e){t.list=e.userinfo,t.pagetoal=e.pagetotal,t.list.forEach(function(e){e.userallinfo.logintime=t.$formatTime(e.userallinfo.logintime).replace(/\//g,"-")})};switch(this.cancelToken(),this.type){case"1":this.$axios.users(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"2":this.$axios.tourist(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"3":this.$axios.expiringcompanys(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject);break;case"5":this.$axios.newusers(e,{cancelToken:this.cancel.token}).then(a).catch(this.reject)}}},created:function(){this.type=this.$route.params.type,this.page=1,this.init()},beforeRouteUpdate:function(t,e,a){this.type=t.params.type,this.page=1,"6"!=this.type&&this.init(),a()}},F={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user"}},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"first",attrs:{to:{path:"/home/user/1"}}},[t._v("用户管理")]),t._v(" "),"1"!=t.$route.params.type?a("el-breadcrumb-item",[t._v(t._s(t.nav))]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"handle"},[1==t.$route.params.type||6==t.$route.params.type?a("div",{staticClass:"search"},[a("span",[t._v("公司名称")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.search.companyname,callback:function(e){t.$set(t.search,"companyname",e)},expression:"search.companyname"}}),t._v(" "),a("span",[t._v("手机号")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.search.mobile,callback:function(e){t.$set(t.search,"mobile",e)},expression:"search.mobile"}}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.goSearch}},[t._v("查询")])],1):t._e(),t._v(" "),1==t.$route.params.type?a("div",{staticClass:"select"},[a("el-radio-group",{on:{change:function(e){t.$router.push("/home/user/"+t.type)}},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("所有用户")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("未关联公司")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("停用")])],1)],1):t._e()]),t._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{prop:"companyname",label:"所属公司",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.username",label:"用户姓名",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.mobile",label:"手机号码",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.logintime",label:"上次登录",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userallinfo.userdisable",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"userstatus",style:{color:"true"===e.row.userallinfo.userdisable?"red":"#606266"}},[t._v(t._s("true"===e.row.userallinfo.userdisable?"停用":"启用"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"members",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.disableUser(e)}}},[t._v(t._s("true"===e.row.userallinfo.userdisable?"启用":"禁用"))]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteRow(e.$index,t.list)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next","prev-text":"上一页","next-text":"下一页",total:t.pagetotal,"current-page":t.page},on:{"update:currentPage":function(e){t.page=e},"current-change":t.change}})],1)},staticRenderFns:[]};var j=a("VU/8")(S,F,!1,function(t){a("+Sft")},"data-v-7e34cc4e",null).exports,U={name:"setting",data:function(){return{expire:0,customerservice:"",loading:null}},methods:{submit:function(){var t=this,e={expire:this.expire,customerservice:this.customerservice};this.loading=this.$loading(),this.$axios.editConfigs(e).then(function(e){if(0!=e.status)throw e.msg;t.loading.close(),t.$message({message:"保存成功！",type:"success"})}).catch(function(e){t.loading.close(),console.log(e),t.$message.error(e)})},init:function(){var t=this;this.$axios.configs().then(function(e){t.expire=e.expire,t.customerservice=e.customerservice}).catch(this.$message.error)}},created:function(){this.init()}},R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"setting"}},[a("div",{staticClass:"header"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{staticClass:"first"},[t._v("参数设置")])],1)],1),t._v(" "),a("div",{staticClass:"handle"},[a("div",{staticClass:"title"},[t._v("设置产品各种参数或数据")]),t._v(" "),a("div",{staticClass:"form"},[a("div",[a("span",{staticClass:"question"},[t._v("正式使用的产品到期提前多少天提醒？")]),t._v(" "),a("div",{staticClass:"right"},[a("el-input",{attrs:{type:"number",placeholder:"请输入天数"},model:{value:t.expire,callback:function(e){t.expire=e},expression:"expire"}}),t._v(" "),a("span",[t._v("天")])],1)]),t._v(" "),a("div",[a("span",{staticClass:"question"},[t._v("客服电话")]),t._v(" "),a("div",{staticClass:"right"},[a("el-input",{staticClass:"phone",attrs:{type:"tel",placeholder:"请输入客服电话"},model:{value:t.customerservice,callback:function(e){t.customerservice=e},expression:"customerservice"}})],1)])])]),t._v(" "),a("div",{staticClass:"button"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("保存")])],1)])},staticRenderFns:[]};var V=a("VU/8")(U,R,!1,function(t){a("5FFu")},"data-v-3575c02a",null).exports;s.default.use(c.a);var E=new c.a({routes:[{path:"/",redirect:"/home"},{path:"/home",component:f,children:[{path:"",component:_},{path:"company/:type",component:T},{path:"user/:type",component:j},{path:"setting",component:V}]},{path:"/login",component:p},{path:"/reset",component:d}]}),L={render:function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"mask"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.showMask,expression:"showMask"}],staticClass:"loading"},[e("img",{attrs:{src:"/static/images/loading@2x.png",alt:""}})])])},staticRenderFns:[]};var D=a("VU/8")({name:"loading",data:function(){return{showMask:!1}},methods:{show:function(){this.showMask=!0},hide:function(){this.showMask=!1}}},L,!1,function(t){a("aB9w")},"data-v-32a55efd",null).exports,M=a("//Fk"),P=a.n(M),z=x.a.create({baseURL:"http://61.139.64.108:18080"});function N(t){return z.post("/backstage/login",t).then(function(t){return t.data})}function W(t){return z.get("/backstage/index",{params:{}}).then(function(t){return t.data})}function q(t,e){return z.get("/backstage/companymanages",k()({params:t},e)).then(function(t){return t.data})}function H(t,e){return z.get("/backstage/companymanage/"+t.name+"?page="+t.page,k()({params:{}},e)).then(function(t){return t.data})}function I(t,e){return z.get("/backstage/tryouts",k()({params:t},e)).then(function(t){return t.data})}function O(t,e){return z.get("/backstage/expiringcompanys",k()({params:t},e)).then(function(t){return t.data})}function A(t,e){return z.get("/backstage/expiredcompanys",k()({params:t},e)).then(function(t){return t.data})}function J(t,e){return z.get("/backstage/newcompanys",k()({params:t},e)).then(function(t){return t.data})}function Y(t,e){return z.get("/backstage/users",k()({params:t},e)).then(function(t){return t.data})}function B(t,e){return z.get("/backstage/newusers",k()({params:t},e)).then(function(t){return t.data})}function G(t,e){return z.get("/backstage/usersearch",k()({params:t},e)).then(function(t){return t.data})}function X(t,e){return z.get("/backstage/tourist",k()({params:t},e)).then(function(t){return t.data})}function Q(t){return z.get("/backstage/configs",{params:{}}).then(function(t){return t.data})}function K(t){return z.post("/backstage/configs",t).then(function(t){return t.data})}function Z(t){return z.get("/backstage/companymembers",{params:t}).then(function(t){return t.data})}function tt(t){return z.get("/backstage/companyhosts",{params:t}).then(function(t){return t.data})}function et(t){return z.patch("/backstage/companyexpire",t).then(function(t){return t.data})}function at(t){return z.patch("/backstage/companymanager",t).then(function(t){return t.data})}function nt(t){return z.delete("/backstage/companymanager",{params:t}).then(function(t){return t.data})}function st(t){return z.patch("/backstage/user",t).then(function(t){return t.data})}function it(t){return z.delete("/backstage/user",{params:t}).then(function(t){return t.data})}function ot(t){return z.patch("/backstage/admin",t).then(function(t){return t.data})}z.interceptors.request.use(function(t){var e=localStorage.getItem("botToken");return!e&&E.replace("/login"),"get"!==t.method&&"delete"!==t.method||(t.params.token=e),"post"!==t.method&&"patch"!==t.method||(t.data.token=e),t},function(t){return P.a.reject(t)}),z.interceptors.response.use(function(t){return 1==t.data.status&&E.push("/login"),t.data.status&&0!=t.data.status?(console.log(t.data.msg),P.a.reject(t.data.msg)):t},function(t){return P.a.reject(t)});var rt=n,ct={install:function(t,e){t.extend(D);t.prototype.$getQueryString=function(t){var e=new RegExp("(^|&)"+name+"=([^&]*)(&|$)"),a=window.location.search.substr(1).match(e);return null!==a?unescape(a[2]):null},t.prototype.$formatTime=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";if(!t)return"";var a=new Date(t),n=a.getFullYear(),s=a.getMonth()+1,i=a.getDate(),o=a.getHours(),r=a.getMinutes(),c=a.getSeconds();return""+n+e+(s>9?s:"0"+s)+e+(i>9?i:"0"+i)+" "+(o>9?o:"0"+o)+":"+(r>9?r:"0"+r)+":"+(c>9?c:"0"+c)},t.prototype.$axios=rt}},lt=a("DVuL"),ut=a.n(lt);a("LicG");s.default.use(ut.a),s.default.use(ct),s.default.config.productionTip=!1,new s.default({el:"#app",router:E,components:{App:r},template:"<App/>"})},TTFl:function(t,e){},aB9w:function(t,e){},jeXW:function(t,e){},qW6r:function(t,e){},thme:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ee0e3a3d4d6a50e926bc.js.map